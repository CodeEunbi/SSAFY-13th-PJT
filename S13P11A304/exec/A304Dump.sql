-- Create database
CREATE DATABASE IF NOT EXISTS `pitchit`
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_general_ci;
USE `pitchit`;

-- Drop tables in dependency order
DROP TABLE IF EXISTS `report`;
DROP TABLE IF EXISTS `reservation`;
DROP TABLE IF EXISTS `prompt`;
DROP TABLE IF EXISTS `user`;

-- user
CREATE TABLE `user` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `email` VARCHAR(255) DEFAULT NULL,
  `name` VARCHAR(255) DEFAULT NULL,
  `nickname` VARCHAR(255) DEFAULT NULL,
  `role` ENUM('ROLE_ADMIN','ROLE_USER') DEFAULT NULL,
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
);

-- prompt
CREATE TABLE `prompt` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `mode_type` ENUM('PT','인성','기술') NOT NULL,
  `job_category` ENUM('MANAGEMENT','MARKETING','TRADE','DEVELOPER','MANUFACTURING','CONSTRUCTION','SALES','FINANCE','MEDIA','DESIGN') NOT NULL,
  `prompt_text` TEXT NOT NULL,
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
);

-- reservation
CREATE TABLE `reservation` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(255) DEFAULT NULL,
  `scheduled_time` DATETIME DEFAULT NULL,
  `is_active` TINYINT(1) DEFAULT NULL,
  `creator_id` BIGINT DEFAULT NULL,
  `job` ENUM(
    'MANAGEMENT','MARKETING','TRADE','DEVELOPER','MANUFACTURING',
    'CONSTRUCTION','SALES','FINANCE','MEDIA','DESIGN'
  ) NOT NULL,
  `mode` ENUM('PT','인성','기술') NOT NULL,
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `max_participant` INT NOT NULL DEFAULT 0,
  `participant_ids` TEXT,
  `order` TEXT,
  `requirements` TEXT NULL,
  `situation` TEXT NULL,
  `question` VARCHAR(255) NULL,
  PRIMARY KEY (`id`),
  KEY `fk_reservation_creator` (`creator_id`),
  CONSTRAINT `fk_reservation_creator`
    FOREIGN KEY (`creator_id`) REFERENCES `user` (`id`)
    ON DELETE CASCADE
);


-- report
CREATE TABLE `report` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `user_id` BIGINT NOT NULL,
  `meeting_at` DATETIME NOT NULL,
  `job` ENUM(
    'MANAGEMENT','MARKETING','TRADE','DEVELOPER','MANUFACTURING',
    'CONSTRUCTION','SALES','FINANCE','MEDIA','DESIGN'
  ) NOT NULL,
  `mode` ENUM('PT','인성','기술') NOT NULL,
  `title` VARCHAR(255) NOT NULL,
  `situation` TEXT,
  `requirements` TEXT,
  `question` VARCHAR(255) DEFAULT NULL,
  `content` TEXT NOT NULL,
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_report_user_id` (`user_id`),
  KEY `idx_report_meeting_at` (`meeting_at`),
  CONSTRAINT `fk_report_user`
    FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
    ON DELETE CASCADE
);


-- seed: user
INSERT INTO `user` (`id`,`email`,`name`,`nickname`,`role`) VALUES
(1,'wrapping304@gmail.com','테스트계정','테스트계정','ROLE_USER'),
(2,'stesti21@dgu.ac.kr','강신지','진형만','ROLE_USER'),
(3,'def27123@gmail.com','강신지','부리부리','ROLE_USER'),
(4,'def27124@gmail.com','강신지2','부리부리2','ROLE_USER'),
(5,'def27125@gmail.com','강신지3','부리부리3','ROLE_USER'),
(6,'zinnnn37@gmail.com','minjinki','minjinki','ROLE_USER'),
(7,'eunbi800@gmail.com','김동하','김은비','ROLE_USER'),
(8,'demo08@pitchit.dev','데모8','데모8','ROLE_USER'),
(9,'demo09@pitchit.dev','데모9','데모9','ROLE_USER'),
(10,'demo10@pitchit.dev','데모10','데모10','ROLE_USER'),
(11,'demo11@pitchit.dev','데모11','데모11','ROLE_USER'),
(12,'demo12@pitchit.dev','데모12','데모12','ROLE_USER'),
(13,'demo13@pitchit.dev','데모13','데모13','ROLE_USER'),
(14,'demo14@pitchit.dev','데모14','데모14','ROLE_USER'),
(15,'demo15@pitchit.dev','데모15','데모15','ROLE_USER'),
(16,'demo16@pitchit.dev','데모16','데모16','ROLE_USER');


-- seed: prompt
INSERT INTO `prompt` (`mode_type`, `job_category`, `prompt_text`) VALUES 
('PT', 'MANAGEMENT', "당신은 기업의 면접관입니다. MANAGEMENT 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n분석·실행 중심 직군\n(예: MANAGEMENT, TRADE, DEVELOPER, MANUFACTURING, CONSTRUCTION)\n→ 실무에서 발생 가능한 문제를 기반으로 원인 분석, 개선 방안 제안, 선택 이유 설명까지 포함하도록 설계하세요.\n- 반드시 실제 서비스 운영 중 발생할 법한 상황 설정\n\n[직무 규칙 — MANAGEMENT]\n- 단순 UI/UX 개선이 아닌, 사업 전략·조직 운영·프로세스 개선·성과관리(KPI)·비용 구조·채널 전략 등 경영 관점의 해결책 제시\n- 시장 환경, 경쟁사 동향, 재무 영향 등 최소 1개 이상 포함\n- 실행 계획에 조직·인력·시스템 배치와 성과 측정 방안 포함\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n경영 전략, 조직 운영, 프로세스 개선, 성과관리(KPI), 비용 구조, 채널 전략 중 하나 이상을 포함하여, 문제 상황의 주요 원인을 분석하고, 개선 방안과 실행 계획, 기대 효과를 제시하는 완결 문장으로 작성"),
('PT', 'DEVELOPER', "당신은 기업의 면접관입니다. DEVELOPER 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n분석·실행 중심 직군\n(예: MANAGEMENT, TRADE, DEVELOPER, MANUFACTURING, CONSTRUCTION)\n→ 실무에서 발생 가능한 문제를 기반으로 원인 분석, 개선 방안 제안, 선택 이유 설명까지 포함하도록 설계하세요.\n- 반드시 실제 서비스 운영 중 발생할 법한 상황 설정\n\n[직무 규칙 — DEVELOPER]\n- DB, 백엔드 API, 프론트엔드 렌더링·상태관리, 모바일 앱 퍼포먼스·호환성, DevOps 배포/빌드, 네트워크 지연·보안 등 다양한 영역 포함 가능\n- 문제 상황에는 현재 기능·화면·프로세스·데이터 흐름의 구체적 상태를 1~2개 이상 묘사하고, 장점과 단점이 혼재된 형태로 기술하여 분석 여지를 남긴다.\n- 경영 지표나 로드맵 작성 요구 없이, 기술적 분석과 해결책 제안에 집중\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n특정 기능 또는 시스템 성능 이슈를 중심으로, 문제 상황의 주요 원인을 분석하고, 기술적 개선 방안과 실행 계획, 기대 효과를 제시하는 완결 문장으로 작성"),
('PT', 'TRADE', "당신은 기업의 면접관입니다. TRADE 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n분석·실행 중심 직군\n(예: MANAGEMENT, TRADE, DEVELOPER, MANUFACTURING, CONSTRUCTION)\n→ 실무에서 발생 가능한 문제를 기반으로 원인 분석, 개선 방안 제안, 선택 이유 설명까지 포함하도록 설계하세요.\n- 반드시 실제 서비스 운영 중 발생할 법한 상황 설정\n\n[직무 규칙 — TRADE]\n- UI/UX 개선을 주된 초점으로 하지 말고, 거래 구조·물류·가격 전략·계약 조건·상품 조달·시장 개척 등 거래 본질에 집중\n- 국내외 시장 환경, 환율, 관세·규제, 공급망 리스크 등 최소 1개 이상 요소를 포함\n- 거래량 회복 또는 신규 시장 확보를 위한 전략·실행계획 포함\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n거래 구조, 가격 전략, 물류, 계약 조건, 시장 개척 등 중 하나 이상을 포함하여, 문제 상황의 주요 원인을 분석하고, 개선 방안과 실행 계획, 기대 효과를 제시하는 완결 문장으로 작성"),
('PT', 'MANUFACTURING', "당신은 기업의 면접관입니다. MANUFACTURING 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n분석·실행 중심 직군\n(예: MANAGEMENT, TRADE, DEVELOPER, MANUFACTURING, CONSTRUCTION)\n→ 실무에서 발생 가능한 문제를 기반으로 원인 분석, 개선 방안 제안, 선택 이유 설명까지 포함하도록 설계하세요.\n- 반드시 실제 서비스 운영 중 발생할 법한 상황 설정\n\n[직무 규칙 — MANUFACTURING]\n- 제품 설계, 생산 공정, 품질 관리, 원가 절감, 공급망 최적화 등 제조 본질에 집중\n- 설비 효율, 불량률, 생산 리드타임, 원자재 조달 등 최소 1개 이상 요소 포함\n- 실행 계획에 개선 프로세스, 자원 배분, 성과 측정 방법 포함\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n생산 효율, 품질 개선, 원가 절감, 공급망 최적화 중 하나 이상을 포함하여, 문제 상황의 주요 원인을 분석하고, 개선 방안과 실행 계획, 기대 효과를 제시하는 완결 문장으로 작성"),
('PT', 'CONSTRUCTION', "당신은 기업의 면접관입니다. CONSTRUCTION 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n분석·실행 중심 직군\n(예: MANAGEMENT, TRADE, DEVELOPER, MANUFACTURING, CONSTRUCTION)\n→ 실무에서 발생 가능한 문제를 기반으로 원인 분석, 개선 방안 제안, 선택 이유 설명까지 포함하도록 설계하세요.\n- 반드시 실제 서비스 운영 중 발생할 법한 상황 설정\n\n[직무 규칙 — CONSTRUCTION]\n- 단순 시각적 디자인이 아닌, 시공 품질, 공정 관리, 예산 집행, 안전 관리, 자재 조달, 인력 배치 등 건설 본질에 집중\n- 현장 안전 지표, 공정 지연, 원가 초과 등 최소 1개 이상 요소 포함\n- 실행 계획에 공정 개선, 리스크 완화, 품질 보증 방안 포함\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n시공 품질, 공정 효율, 예산 집행, 안전 관리 중 하나 이상을 포함하여, 문제 상황의 주요 원인을 분석하고, 개선 방안과 실행 계획, 기대 효과를 제시하는 완결 문장으로 작성"),
('PT', 'MARKETING', "당신은 기업의 면접관입니다. MARKETING 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n창의성 중심 직군\n(예: MARKETING, SALES, DESIGN, MEDIA, FINANCE)\n→ 단순 분석·보고서 작성이 아닌 새로운 아이디어 제안·기획·실행 시뮬레이션 형태로 과제를 설계하세요.\n- 반드시 실물 제품, 서비스, 콘텐츠, 캠페인 등 마케팅 직무 특성에 맞는 구체적 대상 설정\n- 결과물 설명 시 기획 의도, 타겟, 기대 효과, 실행 계획, 차별화 포인트를 포함하도록 유도\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n특정 제품, 서비스 또는 캠페인의 마케팅 성과를 개선하기 위해, 새로운 아이디어를 기획하고, 실행 계획, 타겟 전략, 차별화 포인트, 기대 효과를 포함하여 제시하는 완결 문장으로 작성"),
('PT', 'SALES', "당신은 기업의 면접관입니다. SALES 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n창의성 중심 직군\n(예: MARKETING, SALES, DESIGN, MEDIA, FINANCE)\n→ 단순 분석·보고서 작성이 아닌 새로운 아이디어 제안·기획·실행 시뮬레이션 형태로 과제를 설계하세요.\n- 반드시 실물 제품, 서비스, 캠페인, 영업 채널 등 영업 직무 특성에 맞는 구체적 대상 설정\n- 결과물 설명 시 기획 의도, 타겟, 기대 효과, 실행 계획, 차별화 포인트를 포함하도록 유도\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n영업 성과를 향상시키기 위해, 새로운 영업 전략 또는 캠페인을 기획하고, 실행 계획, 타겟 고객, 차별화 포인트, 기대 효과를 포함하여 제시하는 완결 문장으로 작성"),
('PT', 'DESIGN', "당신은 기업의 면접관입니다. DESIGN 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n창의성 중심 직군\n(예: MARKETING, SALES, DESIGN, MEDIA, FINANCE)\n→ 단순 분석·보고서 작성이 아닌 새로운 아이디어 제안·기획·실행 시뮬레이션 형태로 과제를 설계하세요.\n- 반드시 실물 제품, 서비스, 콘텐츠, 시각 디자인 등 디자인 직무 특성에 맞는 구체적 대상 설정\n- 결과물 설명 시 기획 의도, 타겟, 기대 효과, 실행 계획, 차별화 포인트를 포함하도록 유도\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n특정 서비스나 제품의 디자인 완성도를 높이기 위해, 새로운 디자인 콘셉트를 기획하고, 실행 계획, 차별화 포인트, 기대 효과를 포함하여 제시하는 완결 문장으로 작성"),
('PT', 'MEDIA', "당신은 기업의 면접관입니다. MEDIA 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n창의성 중심 직군\n(예: MARKETING, SALES, DESIGN, MEDIA, FINANCE)\n→ 단순 분석·보고서 작성이 아닌 새로운 아이디어 제안·기획·실행 시뮬레이션 형태로 과제를 설계하세요.\n- 반드시 실물 제품, 서비스, 콘텐츠, 미디어 채널, 캠페인 등 미디어 직무 특성에 맞는 구체적 대상 설정\n- 결과물 설명 시 기획 의도, 타겟, 기대 효과, 실행 계획, 차별화 포인트를 포함하도록 유도\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n특정 미디어 채널 또는 콘텐츠의 성과를 향상시키기 위해, 새로운 기획안을 작성하고, 실행 계획, 타겟 전략, 차별화 포인트, 기대 효과를 포함하여 제시하는 완결 문장으로 작성"),
('PT', 'FINANCE', "당신은 기업의 면접관입니다. FINANCE 직무 지원자에게 실제 면접에서 제시할 PT 과제를 구성하세요.\n\n과제는 반드시 '우리 회사에서 운영 중인 가상의 서비스 또는 실제 서비스'를 기반으로 하며,\n단순 가정이 아닌, 서비스 현황·문제·데이터·사용자 반응이 포함된 **구체적 시나리오**를 제시해야 합니다.\n정답이 하나로 확정되지 않도록 설계하고, **직접적인 원인 명시는 금지**하며,\n시장 데이터·경쟁사 동향·조직 내부 지표 등 간접 단서를 포함해야 합니다.\n한 시나리오 안에서 불필요하게 많은 문제를 동시에 제시하지 않는다.  \n\n창의성 중심 직군\n(예: MARKETING, SALES, DESIGN, MEDIA, FINANCE)\n→ 단순 분석·보고서 작성이 아닌 새로운 아이디어 제안·기획·실행 시뮬레이션 형태로 과제를 설계하세요.\n- 반드시 실물 제품, 서비스, 금융상품, 콘텐츠, 캠페인 등 직무 특성에 맞는 구체적 대상 설정\n- 결과물 설명 시 기획 의도, 타겟, 기대 효과, 실행 계획, 차별화 포인트를 포함하도록 유도\n\n[직무 규칙 — FINANCE]\n- UI/UX 개선을 주된 초점으로 하지 말고, 금융상품·서비스 기획/설계에 중점\n- 상품 구조, 수익성, 리스크 관리, 규제 준수 등 핵심 요소 포함\n\n각 분야의 핵심 기술과 지식을 집중적으로 녹여낼 수 있도록 하고,\n불필요하게 높은 전문 지식 요구는 피하고, 기본 개념과 논리로 해결 가능하게 구성하세요.\n\n과제 형식은 반드시 아래를 따르세요.\n\n[문제 상황]\n(200자 이상, 실제로 발생 가능한 상황을 구체적으로 서술하되, 서비스의 기능·운영 현황·문제·데이터·사용자 반응 포함, \n직접적인 원인 언급 없이 판단에 필요한 간접 단서를 제공하며, 범위는 하나의 기능 또는 과정으로 한정)\n\n[제약 조건 및 배경]\n조건1\n조건2\n...\n\n[PT 주제]\n금융상품 또는 서비스의 기획을 위해, 상품 구조, 수익성, 리스크 관리, 규제 준수 중 하나 이상을 포함하고, 실행 계획, 차별화 포인트, 기대 효과를 제시하는 완결 문장으로 작성");

-- seed: reservation
INSERT INTO `reservation` (`id`,`title`,`scheduled_time`,`is_active`,`creator_id`,`job`,`mode`,`max_participant`,`participant_ids`,`order`) VALUES
(1,'개발 직무 PT 같이해요~','2025-08-18 09:00:00',0,1,'DEVELOPER','PT',4,'[1,12]','[]'),
(2,'마케팅 PT 스터디 같이할 분','2025-08-18 13:00:00',0,1,'MARKETING','PT',5,'[1,13]','[]'),
(3,'디자인 PT 준비 모임','2025-08-18 13:30:00',0,2,'DESIGN','PT',3,'[2,14]','[]'),
(4,'무역 직무 PT 스터디','2025-08-19 09:30:00',0,2,'TRADE','PT',4,'[2,15]','[]'),
(5,'금융권 PT 스터디 모집','2025-08-19 14:00:00',0,2,'FINANCE','PT',5,'[2,16]','[]'),
(6,'개발 PT 모의면접 방','2025-08-19 19:00:00',0,3,'DEVELOPER','PT',4,'[3,11]','[]'),
(7,'세일즈 PT 연습 같이해요','2025-08-20 09:00:00',0,3,'SALES','PT',5,'[3]','[]'),
(8,'미디어 PT 스터디 구함','2025-08-20 11:00:00',0,3,'MEDIA','PT',3,'[3]','[]'),
(9,'건설 직무 PT 스터디','2025-08-20 15:30:00',0,4,'CONSTRUCTION','PT',5,'[4,12,13,14,15]','[]'),
(10,'개발 PT 모의 세션','2025-08-21 10:00:00',0,4,'DEVELOPER','PT',4,'[4,13]','[]'),
(11,'마케팅 PT 모의 세션','2025-08-21 14:30:00',0,4,'MARKETING','PT',5,'[4,14]','[]'),
(12,'디자인 PT 모의발표','2025-08-21 19:00:00',0,5,'DESIGN','PT',5,'[5,11,13,14,16]','[]'),
(13,'무역 PT 면접 스터디','2025-08-22 09:30:00',0,5,'TRADE','PT',4,'[5,16]','[]'),
(14,'금융 PT 모의발표','2025-08-22 13:00:00',0,5,'FINANCE','PT',5,'[5,11]','[]'),
(15,'제조 직무 PT 스터디','2025-08-22 18:30:00',0,6,'MANUFACTURING','PT',5,'[6]','[]'),
(16,'미디어 PT 준비해요','2025-08-23 09:00:00',0,6,'MEDIA','PT',4,'[6]','[]'),
(17,'영업 PT 모의면접','2025-08-23 11:30:00',0,6,'SALES','PT',5,'[6]','[]'),
(18,'건설 PT 준비 모임','2025-08-23 16:00:00',0,7,'CONSTRUCTION','PT',4,'[7]','[]'),
(19,'경영 PT 스터디','2025-08-24 10:00:00',0,7,'MANAGEMENT','PT',5,'[7]','[]'),
(20,'마케팅 PT 면접 스터디','2025-08-24 14:30:00',0,7,'MARKETING','PT',4,'[7]','[]'),
(21,'디자인 PT 면접 스터디','2025-08-24 19:30:00',0,8,'DESIGN','PT',5,'[8,11,12,15,16]','[]'),
(22,'개발 PT 번개 스터디 (2인)','2025-08-25 09:30:00',0,8,'DEVELOPER','PT',2,'[8,16]','[]'),
(23,'무역 PT 준비 같이해요','2025-08-25 13:30:00',0,8,'TRADE','PT',5,'[8,14]','[]'),
(24,'금융 PT 면접 스터디','2025-08-25 18:30:00',0,9,'FINANCE','PT',4,'[9,15]','[]'),
(25,'제조 PT 면접 스터디','2025-08-26 10:00:00',0,9,'MANUFACTURING','PT',5,'[9,16]','[]'),
(26,'미디어 PT 스터디','2025-08-26 15:00:00',0,9,'MEDIA','PT',4,'[9]','[]'),
(27,'영업 PT 면접 스터디','2025-08-26 19:30:00',0,10,'SALES','PT',5,'[10,12,13,14,15]','[]'),
(28,'건설 PT 면접 스터디','2025-08-27 11:00:00',0,10,'CONSTRUCTION','PT',4,'[10]','[]'),
(29,'경영 PT 모의면접','2025-08-27 16:00:00',0,10,'MANAGEMENT','PT',5,'[10]','[]'),
(30,'개발 PT 모의면접','2025-08-27 20:00:00',0,11,'DEVELOPER','PT',4,'[11]','[]');



-- seed: report
INSERT INTO `report` (user_id,meeting_at,job,mode,title,situation,requirements,question,content) VALUES
(1,'2025-07-23 14:30:00','DEVELOPER','PT','공부할사람 모여모여~','당신이 합류하게 될 회사는 국내 중견 전자상거래 플랫폼을 운영하며 월 평균 150만 명 이상의 활성 사용자를 보유하고 있습니다. 최근 진행한 대규모 여름 프로모션 기간에 특정 카테고리(가전제품)의 페이지 로딩 속도가 평소 대비 2배 이상 느려지고, 결제 단계에서 간헐적인 오류가 발생하는 문제가 보고되었습니다. 문제는 이벤트 시작 3일 전부터 예고 없이 발생했으며, 기존 대비 동시 접속자 수가 약 60% 증가한 것이 직접적인 촉발 요인으로 추정됩니다. 백엔드 서버 로그를 분석한 결과, 특정 API 응답 지연이 전체 처리 속도에 영향을 주고 있으며, 데이터베이스에서 재고 수량과 가격 정보를 실시간으로 조회하는 쿼리의 응답 시간이 특히 길어진 것으로 드러났습니다. 문제 해결을 위해 일부 API 캐싱을 시도했지만, 재고 변동이 잦아 잘못된 정보가 노출되는 부작용이 발생했습니다. 현재 마케팅팀은 프로모션 종료까지 남은 5일 동안 성과를 극대화해야 한다며 빠른 대응을 요구하고 있으며, 개발팀은 원인 분석과 동시에 즉각적인 임시 조치와 장기적 개선 방안을 마련해야 하는 상황입니다.','- 플랫폼은 마이크로서비스 아키텍처  기반이며, API 게이트웨이를 통해 서비스가 연결됨\n  - 데이터베이스는 단일 MySQL 인스턴스에서 운영되며 일평균 2,500만 건 이상의 읽기 쿼리를 처리\n  - 재고 정보는 평균 5분마다 변동되며, 잘못된 정보 노출 시 하루 평균 300건 이상의 고객 클레임 가능성\n  - 현재 개발팀은 백엔드 4명, 프론트엔드 3명, QA 1명으로 구성되어 있으며 외부 인력 투입은 불가\n  - 프로모션 종료까지 5일 남았으며, 성능 저하가 지속될 경우 매출 손실이 하루 최대 15%에 이를 것으로 예상\n  - 시스템 장애 관련 SLA는 페이지 로딩 속도 2초 이내, 결제 성공률 99% 이상을 유지해야 함','프로모션 기간 중 발생한 상품 페이지 로딩 지연과 결제 오류 문제의 원인을 분석하고 단기적 대응 방안과 장기적 개선 방안을 제시하며 해당 방안을 선택한 이유를 설명하세요','{\"summary\":\"지원자는 문제를 체계적으로 분석하고, 단기 및 장기 해결책을 명확하게 제시하는 능력이 뛰어나다. 특히, 기술적 세부사항에 대한 이해도가 높고, 이를 바탕으로 실질적인 해결책을 제안하였다.\",\"key_points\":[\"논리력: 문제의 원인 분석과 해결 방안 제시가 체계적이며 논리적이다. 각 단계별로 명확한 이유와 근거를 제시하여 설득력이 높다.\",\"완성도: 문제의 원인, 단기 대응, 장기 개선 방안을 모두 포괄적으로 다루었으며, 제안된 방안의 구체성이 높다.\",\"표현력: 언어적 표현이 명확하고 일관성이 있으며, 복잡한 문제를 이해하기 쉽게 설명하였다.\",\"창의성: 기존의 문제 해결 방법에 더해 독창적인 접근을 시도하였으며, 특히 이벤트 기반 캐시 무효화와 CQRS 패턴 적용이 돋보인다.\",\"적합성: 제안된 방안이 주어진 문제 상황과 직무에 매우 적합하며, 실질적인 해결책을 제시하였다.\"],\"star_method\":[\"Situation: 대규모 프로모션 기간 중 발생한 상품 페이지 로딩 지연과 결제 오류 문제\",\"Task: 문제의 원인을 분석하고, 단기적 대응 방안과 장기적 개선 방안을 제시\",\"Action: 재고 데이터 캐싱, 쿼리 최적화, 읽기 부하 분산, 마이크로서비스 분리 등 다양한 기술적 조치를 제안\",\"Result: 제안된 방안은 문제 해결에 실질적인 기여를 할 수 있으며, 향후 유사한 문제 발생 시에도 안정적인 서비스 제공이 가능할 것으로 기대\"],\"additional_questions\":[\"제안한 방안 중 가장 우선적으로 실행해야 할 것은 무엇이며, 그 이유는 무엇인가요?\",\"장기적 개선 방안의 실행에 따른 예상 비용과 리소스 요구 사항은 무엇인가요?\",\"제안한 방안이 실패할 경우를 대비한 대안은 무엇인가요?\"],\"pros_and_cons\":{\"장점\":\"지원자는 문제를 체계적으로 분석하고, 단기 및 장기 해결책을 명확하게 제시하는 능력이 뛰어나다. 특히, 기술적 세부사항에 대한 이해도가 높고, 이를 바탕으로 실질적인 해결책을 제안하였다.\",\"단점\":\"전반적으로 우수한 답변이지만, 일부 기술적 용어에 대한 추가 설명이 부족하여 비전문가가 이해하기 어려울 수 있다. 또한, 장기적 개선 방안의 실행 가능성에 대한 구체적인 검토가 더 필요하다.\"},\"scores\":{\"total\":88,\"논리력\":18,\"완성도\":18,\"표현력\":17,\"창의성\":17,\"적합성\":18}}'),
(1,'2025-08-01 10:00:00','DEVELOPER','PT','긴급 서버 장애 대응 회의','당신이 속한 회사는 실시간 음식 배달 플랫폼을 운영하며, 하루 평균 200만 건 이상의 주문을 처리하고 있습니다. 최근 점심 피크 시간대에 결제 완료 후 주문 정보가 가맹점에 전달되지 않는 치명적인 장애가 발생했습니다. 이로 인해 약 15%의 주문이 누락되었고, 고객과 가맹점 모두 불만이 폭주하고 있습니다. 로그 분석 결과, 주문 처리 서비스와 결제 서비스 간의 비동기 메시지 큐(Kafka) 처리 지연이 주요 원인으로 보이며, 일부 메시지가 누락되거나 재처리 없이 소실되는 현상이 확인되었습니다. 장애 발생 시각은 주문량이 급증한 시점과 일치하며, 메시지 큐 서버의 리소스 사용률이 95%를 초과한 것으로 나타났습니다. 현재 운영팀은 즉시적인 복구와 함께 재발 방지를 위한 구조 개선을 요구하고 있습니다.','- 플랫폼은 이벤트 기반 마이크로서비스 아키텍처로 구성됨\n - Kafka 클러스터 3노드 운영, 메시지 처리량은 초당 약 50,000건\n - 주문 정보 누락 시 평균 하루 1억 원 이상의 매출 손실 가능성\n - 결제 및 주문 서비스 모두 Java Spring 기반이며, 동기/비동기 호출 혼합 사용\n  - 개발팀은 백엔드 5명, 인프라 2명으로 구성되어 있으며 외부 리소스 투입은 불가\n - SLA는 주문 생성 후 3초 이내 가맹점 수신율 99.5% 이상 유지','주문 정보 누락 문제의 원인을 분석하고, 즉각적인 복구 방안과 재발 방지 구조 개선 방안을 제시하며, 각 방안을 선택한 이유를 설명하세요','{\"summary\":\"지원자는 장애 원인을 정확히 파악하고, 메시지 큐 모니터링 강화, 재처리 로직 도입 등 실질적인 해결책을 제시했다.\",\"key_points\":[\"논리력: 장애 원인과 시스템 병목 구간을 명확하게 식별하였다.\",\"완성도: 단기 복구와 장기 구조 개선 모두 구체적인 실행 계획을 포함했다.\",\"표현력: 복잡한 기술 개념을 비전문가도 이해할 수 있도록 쉽게 설명했다.\",\"창의성: 메시지 재처리와 DLQ(Dead Letter Queue) 활용을 통한 장애 회피 아이디어를 제시했다.\",\"적합성: 제안된 방안이 현 시스템 환경에 적합하며, 즉시 적용 가능성이 높다.\"],\"star_method\":[\"Situation: 점심 피크 시간대 주문 누락 및 메시지 큐 처리 지연\",\"Task: 원인 분석과 함께 단기 복구 및 장기 개선 방안 제시\",\"Action: 메시지 재처리 로직 구현, DLQ 활용, Kafka 파티션 확장, 모니터링 시스템 개선\",\"Result: 장애 복구 속도 단축 및 재발 방지 기대\"],\"additional_questions\":[\"Kafka 파티션 확장 시 고려해야 할 주요 요소는 무엇인가요?\",\"DLQ를 도입할 때 운영상 주의할 점은 무엇인가요?\",\"메시지 큐 병목 현상을 줄이기 위한 인프라 확장 전략은?\"],\"pros_and_cons\":{\"장점\":\"장애 분석이 정확하며, 실현 가능성이 높은 대응책을 제시했다.\",\"단점\":\"비동기 처리 구조에 대한 리팩토링 일정과 리스크에 대한 언급이 부족하다.\"},\"scores\":{\"total\":90,\"논리력\":18,\"완성도\":18,\"표현력\":18,\"창의성\":18,\"적합성\":18}}'),
(1,'2025-08-03 11:00:00','DEVELOPER','PT','코드 프리즈 기간 충돌 해결 사례','신규 결제 모듈 릴리스 직전 코드 프리즈 기간에 핵심 버그가 발견되었습니다. A개발자는 긴급 패치를 주장했으나, B개발자는 안정성을 이유로 프리즈 유지와 롤백을 주장하며 갈등이 발생했습니다. PO는 일정 준수를 최우선으로 요구했고, QA는 테스트 커버리지 부족을 문제로 지적했습니다. 제한된 시간 안에 갈등을 조정하고 리스크를 최소화해야 하는 상황입니다.','- 팀 구성: 백엔드 3명, 프론트엔드 2명, QA 1명\n- 릴리스 D-2, 코드 프리즈 정책 적용 중\n- 현재 테스트 커버리지 62%, 결제 성공률 KPI 99.2% 유지 필요\n- 패치 적용 시 회귀 테스트 최소 4시간 소요 예상','갈등 상황에서의 의사결정 과정과 커뮤니케이션 전략을 STAR 기법으로 설명하고, 선택 이유와 리스크 관리 방안을 제시하세요.','{\"summary\":\"지원자는 이해관계자 조율과 리스크 관리에 기반한 의사결정 능력을 보여주었다.\",\"key_points\":[\"논리력: 의사결정 기준을 명확히 수립\",\"완성도: 롤백 플랜과 점진적 배포 제시\",\"표현력: 갈등 원인과 해결 과정을 명확하게 설명\",\"창의성: 카나리 릴리스로 위험 분산\",\"적합성: 정책과 KPI를 모두 고려\"],\"star_method\":[\"Situation: 프리즈 기간 핵심 버그 발견\",\"Task: 일정 준수와 품질 보장 간 균형\",\"Action: 영향도 기반 우선순위, 카나리 배포, QA 집중 테스트\",\"Result: 일정 지연 없이 결제 성공률 유지\"],\"additional_questions\":[\"카나리 비율과 모니터링 지표를 어떻게 설정할 것인가?\",\"롤백 트리거 조건은?\",\"의사결정 기록을 어떻게 남길 것인가?\"],\"pros_and_cons\":{\"장점\":\"이해관계자 커뮤니케이션이 체계적\",\"단점\":\"테스트 자동화 범위 확대 계획이 부족\"},\"scores\":{\"total\":87,\"논리력\":18,\"완성도\":17,\"표현력\":17,\"창의성\":17,\"적합성\":18}}'),
(1, '2025-08-10 10:00:00', 'DEVELOPER', 'PT', '서버 과부하 위기', '주말 대규모 이벤트 직후 글로벌 게임 서버의 동시 접속이 평소 대비 3배 이상 증가하며 일부 리전에서 응답 지연과 타임아웃이 증가했다. 랭킹 시스템 API 호출 집중으로 다른 서비스에도 체감 지연이 전파되고, 매칭 지연에 따른 이탈률 상승이 관측되었다.', '- 서버는 리전별 오토스케일이 가능하나 데이터베이스는 단일 MySQL 인스턴스를 공유\n - 캐싱은 일부 공용 API에만 적용\n - 이벤트 종료까지 2일 남음\n - 평균 지연 2초 이상 지속 시 사용자 이탈률 20퍼센트 이상 예상\n - SLA는 평균 응답 500ms 이하, 에러율 1퍼센트 이하', '과부하의 주된 원인을 파악하고, 이벤트 종료 전까지 유효한 단기 안정화 방안과 재발 방지를 위한 장기 대책을 우선순위와 근거와 함께 제시하라', '{"summary":"게임 서버 과부하 상황에서 핵심 병목을 빠르게 추적하고, 즉시 효과가 나는 완화책과 구조적 개선을 균형 있게 제시하였다.","key_points":["논리력: 트래픽 분포, 핫스팟 API, DB 공유자원 등 원인-영향 경로를 단계적으로 정리.","완성도: 임시 대응, 위험 완화, 모니터링 지표까지 포함한 실행 계획 제시.","표현력: 비기술 이해관계자도 이해할 수준으로 수치와 용어를 정리.","창의성: 이벤트 기반 캐시 무효화와 리드 레플리카 기반 읽기 분산을 조합.","적합성: 제약 조건 하에서 달성 가능한 선택지를 우선순위화."],"star_method":["Situation: 이벤트 트래픽 급증으로 특정 API와 DB가 병목.","Task: 단기 안정화와 장기 재발 방지책을 수립.","Action: 랭킹 API 캐시 키 단순화, TTL 단축, 읽기 전용 리플리카 증설, 큐 기반 비동기화, 서킷브레이커 적용.","Result: 타임아웃률 감소, 평균 지연 40퍼센트 이상 개선 예상, 장애 전파 차단."],"additional_questions":["캐시 무효화 정책 실패 시 정합성 리스크를 어떻게 감시하고 롤백할 것인가","리전 간 트래픽 스티어링 기준과 컷오버 절차는 무엇인가","DB 단일 인스턴스의 수직 한계를 넘기 위한 파티셔닝 전략은 무엇인가"],"pros_and_cons":{"장점":"즉시성 높은 조치와 구조 개선 간 트레이드오프를 명확히 설명.","단점":"데이터 모델 변경 범위와 마이그레이션 리스크에 대한 정량 근거가 부족."},"scores":{"total":86,"논리력":17,"완성도":17,"표현력":17,"창의성":17,"적합성":18}}'),
(1, '2025-08-12 09:30:00', 'DEVELOPER', 'PT', '검색 서비스 장애', '국내 전자책 플랫폼에서 신간이 대량 등록된 이후 검색 요청의 40퍼센트가 타임아웃되고 순위가 불안정해졌다. 동기화 지연과 인덱스 재구성 장기 수행이 겹치며 사용자 경험 저하와 환불 요청이 증가하고 있다.', '- 검색 스택은 Elasticsearch 기반이며 색인 파이프라인에서 배치와 스트림이 혼재\n - 검색 API SLA는 1초 이하\n - 장애가 6시간 이상 지속될 경우 일매출 25퍼센트 감소 예상\n - 추천 서비스가 검색 결과에 종속되어 연쇄 영향 발생', '검색 장애의 근본 원인을 구체화하고, 긴급 복구 절차와 인프라 및 스키마 레벨의 장기 성능 개선 방안을 제시하라', '{"summary":"색인 파이프라인 병목과 쿼리 복잡도를 구분해 접근하고, 단계적 서킷오프와 랭킹 보존을 병행하여 서비스 연속성을 확보하였다.","key_points":["논리력: 색인 경로, 큐 적체, 스냅샷 작업 충돌을 분리 분석.","완성도: 읽기 전용 클러스터 분리와 콜드-핫 노드 운영 방안 포함.","표현력: 장애 타임라인과 롤백 포인트를 명료히 기술.","창의성: 캐시드 워드리스트와 백필 필터로 부분 기능 유지.","적합성: 비즈니스 임팩트 기준으로 쿼리 다운그레이드 정의."],"star_method":["Situation: 신간 폭주 시 색인 지연과 쿼리 타임아웃 동시 발생.","Task: 중단 없는 검색 제공과 가용성 회복.","Action: 색인 스로틀링과 우선순위 큐 도입, 리드 전용 클러스터로 트래픽 분리, 쿼리 템플릿 단순화, 비핵심 애그리게이션 임시 비활성화.","Result: p95 응답 1.8초에서 0.9초로 회복, 타임아웃률 40퍼센트에서 5퍼센트 미만으로 감소."],"additional_questions":["색인 우선순위 정책에서 저자명과 제목 간 가중치 설정 근거는","리드-라이트 스플릿 시 정합성 지연을 사용자에게 어떻게 숨길 것인가","스키마 변경에 따른 재색인 비용을 어떻게 분산할 것인가"],"pros_and_cons":{"장점":"장애 동안 기능 축소 전략으로 핵심 경험을 보존.","단점":"추천과 검색의 결합도 완화 계획이 추가로 필요."},"scores":{"total":83,"논리력":16,"완성도":16,"표현력":16,"창의성":17,"적합성":18}}'),
(1, '2025-08-15 15:00:00', 'DEVELOPER', 'PT', '결제 모듈 오류', '대형 쇼핑몰에서 특정 카드사 결제 시 실패율이 30퍼센트까지 상승했다. 외부 결제 게이트웨이 응답 지연과 내부 재시도 로직의 지수 백오프 누락으로 스파이크가 증폭되며 카트 이탈이 급증했다.', '- 외부 결제 API 가용성 목표 99.9퍼센트\n - 내부 재시도 최대 3회 설정이나 백오프 미적용\n - 결제 실패 시 고객 문의 폭주 예상\n - 결제 성공률 99퍼센트 이상 유지가 SLA', '실패율 급증의 직접 원인과 간접 원인을 구분하여 진단하고, 외부 의존성 리스크를 줄이는 단기 및 장기 개선책을 제시하라', '{"summary":"외부 연동 장애 전파를 차단하고 자체 견고성을 높이는 방안을 단기와 장기로 분리 제시하였다.","key_points":["논리력: 실패 유형 분류와 타임아웃-재시도 상호작용을 명확히 설명.","완성도: 서킷브레이커, 폴백, 아이들 포트 보존 등 운영 관점 포함.","표현력: 시퀀스 다이어그램 수준의 절차 설명으로 이해 용이.","창의성: 오프라인 승인 토큰과 지연 캡처 전략 제안.","적합성: 보안과 규제 환경을 고려한 변경 범위 제시."],"star_method":["Situation: 외부 게이트웨이 지연과 내부 재시도 폭주로 실패율 급증.","Task: 단기 성공률 회복과 장기 공급자 의존도 완화.","Action: 타임아웃 상한 하향, 지수 백오프와 재시도 지연 도입, 서킷브레이커 및 큐잉, 멱등 키 기반 재시도, 다중 프로바이더 라우팅.","Result: 결제 성공률 단기 97퍼센트 이상 회복, 장기 99퍼센트 목표 달성 가능성 제시."],"additional_questions":["다중 프로바이더 우선순위와 헬스체크 기준은 무엇인가","멱등 키 충돌과 중복 청구 방지를 어떻게 검증할 것인가","지연 캡처 도입 시 재고 확정 시점과 회계 처리 영향은"],"pros_and_cons":{"장점":"외부 장애 전파 차단과 내부 견고성 향상을 동시에 달성하려는 설계.","단점":"프로바이더 추가 계약과 정산 시스템 변경에 따른 비용 추정이 보완 필요."},"scores":{"total":89,"논리력":18,"완성도":18,"표현력":17,"창의성":18,"적합성":18}}');